<div class="container-fluid">
  <div class="row">
    <nav
      class="col-md-3 col-lg-2 d-md-block bg-success text-white min-vh-100 p-4 rounded"
    >
      <h6 class="text-center">THÔNG TIN TÀI KHOẢN</h6>
      <ul class="nav flex-column text-center p-3">
        <li class="nav-item">
          <a
            class="nav-link text-white active"
            href="/profile/<%= data.user.id %>"
          >
            <i class="bi bi-person-circle"></i> Quản lý tài khoản
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white" href="/listAddress">
            <i class="bi bi-gear"></i> Quản lý địa chỉ
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white" href="/historyProduct">
            <i class="bi bi-chat-dots"></i> Lịch sử đặt hàng
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white" href="/rePassword">
            <i class="bi bi-bell"></i> Đặt lại mật khẩu
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white" href="/deleteAccount">
            <i class="bi bi-box-arrow-right"></i> Xóa tài khoản
          </a>
        </li>
      </ul>
    </nav>

    <div class="col-md-9 ms-sm-auto">
      <h1 class="text-center">ĐƠN HÀNG CỦA BẠN</h1>

      <% if (data.orders.length === 0) { %>
      <div class="text-center">
        <h2 class="mb-5 mt-5">Hiện tại bạn chưa có đơn hàng nào.</h2>
        <a href="/menu" class="btn btn-success w-100">Đi mua hàng</a>
      </div>
      <% } else { %> <% data.orders.forEach(function(order, index) { %>
      <div class="mb-4 border rounded p-3">
        <h4 class="d-flex justify-content-between align-items-center">
          Đơn hàng của #<%= index + 1 %>
          <button
            class="btn btn-link"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#orderItems<%= index %>"
            aria-expanded="false"
            aria-controls="orderItems<%= index %>"
          >
            Xem chi tiết
          </button>
        </h4>

        <p>
          <strong>
            Trạng thái đơn hàng : <% if (order.status == 1) { %> Đặt hàng <% }
            else if (order.status == 2) { %> Tiếp nhận <% } else if
            (order.status == 3) { %> Đang vận chuyển <% } else if (order.status
            == 4) { %> Thành công <% } else if (order.status == 5) { %> Bị hủy
            <% } else { %> Trạng thái không xác định <% } %>
          </strong>
        </p>

        <p><strong>Tổng tiền:</strong> <%= order.total %> VND</p>
        <a href="/api/cancelOrder/<%= order.id %>" class="btn btn-danger">
          Hủy đơn hàng
        </a>

        <div class="collapse" id="orderItems<%= index %>">
          <div class="mt-3">
            <% order.productList.forEach(function(product) { %>
            <div class="row mb-3 align-items-center">
              <div class="col-md-3">
                <img
                  src="<%= product.imageUrl %>"
                  alt="<%= product.name %>"
                  class="img-fluid rounded"
                />
              </div>
              <div class="col-md-6">
                <p><strong>Tên món:</strong> <%= product.name %></p>
                <p><strong>Giá:</strong> <%= product.price %> VND</p>
                <p><strong>Số lượng:</strong> <%= product.quantity %></p>
              </div>
            </div>
            <% }); %>
          </div>
        </div>
      </div>
      <% }); %> <% } %>
    </div>
  </div>
</div>
